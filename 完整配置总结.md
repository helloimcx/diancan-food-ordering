# ğŸ‰ é˜¿é‡Œäº‘Dockerè‡ªåŠ¨åŒ–éƒ¨ç½² - å®Œæ•´é…ç½®æ€»ç»“

## ğŸ“Š é…ç½®å®ŒæˆçŠ¶æ€ âœ…

### ç³»ç»Ÿæ¶æ„
```
GitHubä»“åº“ â†’ GitHub Actions â†’ GitHub Container Registry â†’ é˜¿é‡Œäº‘æœåŠ¡å™¨ â†’ Dockerå®¹å™¨
```

### éªŒè¯ç»“æœ
âœ… **æ‰€æœ‰é…ç½®æ–‡ä»¶å·²æ­£ç¡®è®¾ç½®**
- GitHub Actionså·¥ä½œæµ âœ…
- Dockerfileé…ç½® âœ…  
- æœåŠ¡å™¨è®¾ç½®è„šæœ¬ âœ…
- SSHå¯†é’¥ç”Ÿæˆå·¥å…· âœ…
- é¢„æ£€æŸ¥éªŒè¯å·¥å…· âœ…

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

### GitHubä»“åº“æ–‡ä»¶
```
â”œâ”€â”€ .github/workflows/deploy-alicloud.yml     # CI/CDå·¥ä½œæµ
â”œâ”€â”€ server/Dockerfile                         # Dockeré•œåƒé…ç½®
â”œâ”€â”€ server-setup.sh                           # é˜¿é‡Œäº‘æœåŠ¡å™¨åˆå§‹åŒ–
â”œâ”€â”€ generate-ssh-key.sh                       # SSHå¯†é’¥ç”Ÿæˆå·¥å…·
â”œâ”€â”€ pre-deploy-check.sh                       # é¢„æ£€æŸ¥å·¥å…·
â”œâ”€â”€ github-actions-check.sh                   # GitHub ActionséªŒè¯
â”œâ”€â”€ é˜¿é‡Œäº‘éƒ¨ç½²çŠ¶æ€æŠ¥å‘Š.md                      # éƒ¨ç½²çŠ¶æ€æŠ¥å‘Š
â”œâ”€â”€ éƒ¨ç½²å¤±è´¥è¯Šæ–­.md                           # æ•…éšœè¯Šæ–­æŒ‡å—
â””â”€â”€ é˜¿é‡Œäº‘å¿«é€Ÿéƒ¨ç½².md                         # å¿«é€Ÿå¼€å§‹æŒ‡å—
```

## ğŸš€ ç«‹å³å¯æ‰§è¡Œçš„éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: Railwayå¿«é€Ÿéƒ¨ç½² (æ¨èæ–°æ‰‹)
```bash
./railway-deploy.sh
```
**ä¼˜åŠ¿**: 5åˆ†é’Ÿå®Œæˆï¼Œæ— éœ€å¤æ‚é…ç½®
**æ—¶é—´**: çº¦5åˆ†é’Ÿ
**æˆæœ¬**: å…è´¹ï¼ˆæ¯æœˆ100å°æ—¶ï¼‰

### æ–¹æ¡ˆ2: é˜¿é‡Œäº‘Dockeréƒ¨ç½² (æ¨èæœ‰æœåŠ¡å™¨ç”¨æˆ·)
```bash
# 1. ç”ŸæˆSSHå¯†é’¥
./generate-ssh-key.sh

# 2. é…ç½®æœåŠ¡å™¨
scp server-setup.sh root@YOUR_SERVER_IP:/root/
ssh root@YOUR_SERVER_IP
./server-setup.sh

# 3. é…ç½®GitHub Secrets
# è®¿é—®: https://github.com/helloimcx/diancan-food-ordering/settings/secrets/actions
# æ·»åŠ : ALICLOUD_HOST, ALICLOUD_USER, ALICLOUD_PRIVATE_KEY, ALICLOUD_PORT

# 4. è§¦å‘éƒ¨ç½²
git add server/
git commit -m "æµ‹è¯•é˜¿é‡Œäº‘Dockerè‡ªåŠ¨åŒ–éƒ¨ç½²"
git push origin main
```

## ğŸ” ç¯å¢ƒéªŒè¯

### è¿è¡Œé¢„æ£€æŸ¥
```bash
./pre-deploy-check.sh
```

### éªŒè¯GitHub Actionsé…ç½®
```bash
./github-actions-check.sh
```

### æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
è®¿é—®: https://github.com/helloimcx/diancan-food-ordering/actions

## ğŸŒ éƒ¨ç½²å®Œæˆåçš„è®¿é—®åœ°å€

### å‰ç«¯åº”ç”¨
- **URL**: https://diancan-food-ordering.vercel.app
- **çŠ¶æ€**: âœ… å·²éƒ¨ç½²

### åç«¯API (éƒ¨ç½²æˆåŠŸå)
- **URL**: `http://YOUR_SERVER_IP:3001/api`
- **å¥åº·æ£€æŸ¥**: `curl http://YOUR_SERVER_IP:3001/api/foods`

### å‰ç«¯é…ç½®æ›´æ–°
åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
```
VITE_API_URL=http://YOUR_SERVER_IP:3001/api
```

## ğŸ› ï¸ æœåŠ¡å™¨ç®¡ç†å‘½ä»¤

éƒ¨ç½²æˆåŠŸåï¼Œåœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šè¿è¡Œï¼š
```bash
cd /opt/diancan-backend

# æœåŠ¡ç®¡ç†
./service-manager.sh [start|stop|restart|logs|status|update]

# ç¯å¢ƒæ£€æŸ¥
./health-check.sh

# æ¸…ç†èµ„æº
./cleanup.sh

# æ‰‹åŠ¨éƒ¨ç½²
./deploy.sh
```

## ğŸ”„ è‡ªåŠ¨åŒ–æµç¨‹

ä¸€æ—¦é…ç½®å®Œæˆï¼Œè‡ªåŠ¨åŒ–æµç¨‹å¦‚ä¸‹ï¼š

1. **æ¨é€ä»£ç ** â†’ `git push origin main`
2. **GitHub Actionsè§¦å‘** â†’ æ£€æµ‹serverç›®å½•æ›´æ”¹
3. **æ„å»ºDockeré•œåƒ** â†’ ä½¿ç”¨GitHub Container Registry
4. **SSHéƒ¨ç½²** â†’ è‡ªåŠ¨è¿æ¥åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨
5. **å®¹å™¨å¯åŠ¨** â†’ æ‹‰å–é•œåƒå¹¶å¯åŠ¨æœåŠ¡
6. **å¥åº·æ£€æŸ¥** â†’ éªŒè¯APIæœåŠ¡æ­£å¸¸

## ğŸš¨ æ•…éšœæ’é™¤

### éƒ¨ç½²å¤±è´¥æ—¶
1. **æŸ¥çœ‹æ—¥å¿—**: https://github.com/helloimcx/diancan-food-ordering/actions
2. **è¿è¡ŒéªŒè¯**: `./github-actions-check.sh`
3. **æ£€æŸ¥é…ç½®**: `./pre-deploy-check.sh`
4. **æŸ¥çœ‹è¯Šæ–­**: `éƒ¨ç½²å¤±è´¥è¯Šæ–­.md`

### å¸¸è§é—®é¢˜
- **SSHè¿æ¥å¤±è´¥**: éªŒè¯å¯†é’¥æ ¼å¼å’ŒæœåŠ¡å™¨é…ç½®
- **Dockerå®‰è£…å¤±è´¥**: ç¡®è®¤æœåŠ¡å™¨æ“ä½œç³»ç»Ÿå…¼å®¹æ€§
- **ç«¯å£è¢«å ç”¨**: æ£€æŸ¥3001ç«¯å£æ˜¯å¦è¢«å…¶ä»–æœåŠ¡ä½¿ç”¨
- **æƒé™é—®é¢˜**: ç¡®è®¤æœåŠ¡å™¨ç”¨æˆ·æƒé™è®¾ç½®

## ğŸ’¡ æ¨èæ“ä½œæµç¨‹

### æ–°æ‰‹ç”¨æˆ· (æ¨è)
1. å…ˆä½¿ç”¨Railwayéƒ¨ç½²ï¼š`./railway-deploy.sh`
2. ä½“éªŒå®Œæ•´åŠŸèƒ½åï¼Œå†é…ç½®é˜¿é‡Œäº‘
3. é€æ­¥è¿ç§»åˆ°è‡ªæœ‰æœåŠ¡å™¨

### æœ‰ç»éªŒç”¨æˆ·
1. ç›´æ¥é…ç½®é˜¿é‡Œäº‘Dockeréƒ¨ç½²
2. ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·å¿«é€Ÿéƒ¨ç½²
3. å»ºç«‹ç›‘æ§å’Œç»´æŠ¤æœºåˆ¶

## ğŸ“ æ”¯æŒèµ„æº

- **è¯¦ç»†æ–‡æ¡£**: `é˜¿é‡Œäº‘å¿«é€Ÿéƒ¨ç½².md`
- **æ•…éšœè¯Šæ–­**: `éƒ¨ç½²å¤±è´¥è¯Šæ–­.md` 
- **çŠ¶æ€æŠ¥å‘Š**: `é˜¿é‡Œäº‘éƒ¨ç½²çŠ¶æ€æŠ¥å‘Š.md`
- **GitHub Actions**: https://github.com/helloimcx/diancan-food-ordering/actions

---

## âœ… é…ç½®å®Œæˆç¡®è®¤

**æ‰€æœ‰å¿…è¦çš„é…ç½®æ–‡ä»¶å·²åˆ›å»ºå¹¶éªŒè¯é€šè¿‡**
**è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹å·²é…ç½®å®Œæˆ**
**ä¸¤ç§éƒ¨ç½²æ–¹æ¡ˆå‡å·²å‡†å¤‡å°±ç»ª**

ğŸš€ **ç°åœ¨å¯ä»¥å¼€å§‹éƒ¨ç½²äº†ï¼é€‰æ‹©é€‚åˆæ‚¨çš„æ–¹æ¡ˆå¼€å§‹æ“ä½œã€‚**