# ğŸ“± æ‰‹æœºè®¿é—® - äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸš€ æ–¹æ¡ˆä¸€ï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘éƒ¨ç½²

### 1ï¸âƒ£ **è´­ä¹°äº‘æœåŠ¡å™¨**
- **æ¨èé…ç½®**: 2æ ¸2Gå†…å­˜ï¼Œ5Mbpså¸¦å®½
- **ç³»ç»Ÿé€‰æ‹©**: Ubuntu 20.04 LTS
- **è´¹ç”¨**: çº¦100-200å…ƒ/æœˆ

### 2ï¸âƒ£ **æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡**
```bash
# è¿æ¥æœåŠ¡å™¨åæ‰§è¡Œ
sudo apt update
sudo apt install -y curl git nodejs npm nginx

# å®‰è£…PM2è¿›ç¨‹ç®¡ç†å™¨
sudo npm install -g pm2
```

### 3ï¸âƒ£ **éƒ¨ç½²åº”ç”¨**
```bash
# 1. ä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨ï¼ˆä½¿ç”¨scpæˆ–git cloneï¼‰
# 2. éƒ¨ç½²åç«¯æœåŠ¡
cd server
npm install
npm install -g pm2
pm2 start npm --name "diancan-backend" -- start
pm2 save
pm2 startup

# 3. æ„å»ºå‰ç«¯
cd ..
npm install
npm run build

# 4. é…ç½®Nginx
sudo nano /etc/nginx/sites-available/diancan
```

### 4ï¸âƒ£ **Nginxé…ç½®å†…å®¹**
```nginx
server {
    listen 80;
    server_name your-domain.com;  # æ‚¨çš„åŸŸå
    
    # é™æ€æ–‡ä»¶ï¼ˆå‰ç«¯ï¼‰
    location / {
        root /path/to/diancan/dist;
        try_files $uri $uri/ /index.html;
    }
    
    # APIä»£ç†ï¼ˆåç«¯ï¼‰
    location /api/ {
        proxy_pass http://localhost:3001/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # å¥åº·æ£€æŸ¥
    location /health {
        proxy_pass http://localhost:3001/health;
    }
}
```

### 5ï¸âƒ£ **å¯ç”¨ç½‘ç«™**
```bash
sudo ln -s /etc/nginx/sites-available/diancan /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
sudo systemctl enable nginx
```

---

## ğŸ†“ æ–¹æ¡ˆäºŒï¼šå…è´¹éƒ¨ç½²ï¼ˆè¯•ç”¨ï¼‰

### æ–¹æ¡ˆA: Vercel + Railway
- **å‰ç«¯**: Vercelï¼ˆå…è´¹ï¼‰
- **åç«¯**: Railwayï¼ˆå…è´¹é¢åº¦ï¼‰
- **ä¼˜ç‚¹**: å®Œå…¨å…è´¹
- **ç¼ºç‚¹**: æœ‰æµé‡é™åˆ¶

### æ–¹æ¡ˆB: Heroku + Vercel  
- **å‰ç«¯**: Vercelï¼ˆå…è´¹ï¼‰
- **åç«¯**: Herokuï¼ˆå…è´¹é¢åº¦ï¼‰
- **ä¼˜ç‚¹**: çŸ¥åå¹³å°ç¨³å®š
- **ç¼ºç‚¹**: 2022å¹´å·²ä¸å†å…è´¹

---

## ğŸ”§ æ–¹æ¡ˆä¸‰ï¼šå†…ç½‘ç©¿é€ï¼ˆå¿«é€Ÿè¯•ç”¨ï¼‰

### ä½¿ç”¨ngrok
```bash
# 1. å®‰è£…ngrok
# https://ngrok.com/download

# 2. åç«¯æœåŠ¡ç©¿é€
ngrok http 3001
# ä¼šå¾—åˆ°ç±»ä¼¼ https://abc123.ngrok.io çš„åœ°å€

# 3. ä¿®æ”¹å‰ç«¯é…ç½®
# å°† src/api.js ä¸­çš„ API_BASE_URL æ”¹ä¸º ngrok åœ°å€
```

---

## ğŸ“± **æ‰‹æœºè®¿é—®è®¾ç½®**

### 1. **åŸŸåè®¾ç½®ï¼ˆæ¨èï¼‰**
- è´­ä¹°åŸŸåï¼ˆå¦‚ï¼šdiancan.comï¼‰
- è§£æåˆ°æœåŠ¡å™¨IP
- SSLè¯ä¹¦é…ç½®ï¼ˆLet's Encryptå…è´¹ï¼‰

### 2. **æ‰‹æœºæµè§ˆå™¨**
- ç›´æ¥è®¿é—®æ‚¨çš„åŸŸå
- æ·»åŠ åˆ°æ‰‹æœºæ¡Œé¢ï¼ˆåƒAPPä¸€æ ·ä½¿ç”¨ï¼‰

### 3. **PWAè®¾ç½®ï¼ˆå¯é€‰ï¼‰**
- è®©æµè§ˆå™¨"æ·»åŠ åˆ°ä¸»å±å¹•"
- ç¦»çº¿ä¹Ÿèƒ½ä½¿ç”¨åŸºæœ¬åŠŸèƒ½

---

## ğŸ’¡ **å»ºè®®çš„é€‰æ‹©**

### ğŸ¥‡ **æœ€ä½³æ–¹æ¡ˆ**ï¼šäº‘æœåŠ¡å™¨ + åŸŸå
- **ç¨³å®šæ€§**: 99.9% åœ¨çº¿æ—¶é—´
- **é€Ÿåº¦**: å›½å†…è®¿é—®å¿«
- **æˆæœ¬**: 100-200å…ƒ/æœˆ
- **è‡ªç”±åº¦**: å®Œå…¨è‡ªä¸»æ§åˆ¶

### ğŸ¥ˆ **æ€§ä»·æ¯”æ–¹æ¡ˆ**ï¼šå†…ç½‘ç©¿é€ + ä¸´æ—¶ä½¿ç”¨
- **æˆæœ¬**: å…è´¹
- **é€Ÿåº¦**: å–å†³äºç½‘ç»œ
- **ç¨³å®šæ€§**: å¶æœ‰æ–­çº¿

### ğŸ¥‰ **ä½“éªŒæ–¹æ¡ˆ**ï¼šå…è´¹å¹³å°è¯•ç”¨
- **æˆæœ¬**: å…è´¹
- **é™åˆ¶**: æµé‡/æ—¶é—´é™åˆ¶
- **é€‚åˆ**: çŸ­æœŸæµ‹è¯•

---

## ğŸ” **å®‰å…¨æé†’**

1. **é˜²ç«å¢™è®¾ç½®**: åªå¼€æ”¾80ã€443ç«¯å£
2. **SSLè¯ä¹¦**: å¯ç”¨HTTPSåŠ å¯†
3. **å®šæœŸå¤‡ä»½**: æ•°æ®åº“æ–‡ä»¶å¤‡ä»½
4. **è®¿é—®æ§åˆ¶**: å¯è®¾ç½®ç®€å•çš„è®¿é—®å¯†ç 

---

## ğŸ“ **éœ€è¦å¸®åŠ©ï¼Ÿ**

å¦‚éœ€è¯¦ç»†éƒ¨ç½²ååŠ©ï¼Œå¯ä»¥æä¾›ï¼š
- æ‚¨çš„æŠ€æœ¯ç»éªŒæ°´å¹³
- é¢„ç®—èŒƒå›´
- æœŸæœ›çš„éƒ¨ç½²æ—¶é—´
- å¯¹ç¨³å®šæ€§çš„è¦æ±‚

æˆ‘ä»¬ä¼šæä¾›é’ˆå¯¹æ€§çš„éƒ¨ç½²æ–¹æ¡ˆï¼