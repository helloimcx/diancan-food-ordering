# ğŸš¨ é˜¿é‡Œäº‘Dockeréƒ¨ç½²å¤±è´¥ - é—®é¢˜è¯Šæ–­

## ğŸ“Š å½“å‰çŠ¶æ€

### âŒ GitHub ActionsçŠ¶æ€
- **å·¥ä½œæµ**: é˜¿é‡Œäº‘æœåŠ¡å™¨Dockeréƒ¨ç½²
- **çŠ¶æ€**: `failed`
- **è¿è¡ŒID**: 19605048704
- **æ—¶é—´**: 2025-11-23 03:10:40

### ğŸ” å¯èƒ½åŸå› åˆ†æ

#### 1. GitHub Secretsæœªé…ç½® âŒ
**æœ€å¯èƒ½çš„åŸå› **ï¼šæ²¡æœ‰é…ç½®ä»¥ä¸‹GitHub Secretsï¼š
- `ALICLOUD_HOST`
- `ALICLOUD_USER` 
- `ALICLOUD_PRIVATE_KEY`
- `ALICLOUD_PORT`

#### 2. SSHè¿æ¥å¤±è´¥ âŒ
- ç§é’¥æ ¼å¼é”™è¯¯
- æœåŠ¡å™¨IPé”™è¯¯
- ç”¨æˆ·åé”™è¯¯
- é˜²ç«å¢™é˜»æ­¢

#### 3. Dockerç›¸å…³é”™è¯¯ âŒ
- æœåŠ¡å™¨æœªå®‰è£…Docker
- æƒé™é—®é¢˜
- ç«¯å£è¢«å ç”¨

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤1: é…ç½®GitHub Secrets (å¿…é¡»)

1. **è®¿é—®GitHubä»“åº“è®¾ç½®**
   ```
   https://github.com/helloimcx/diancan-food-ordering/settings/secrets/actions
   ```

2. **æ·»åŠ ä»¥ä¸‹Secrets**ï¼š

   | Name | Value |
   |------|-------|
   | ALICLOUD_HOST | æ‚¨çš„é˜¿é‡Œäº‘æœåŠ¡å™¨å…¬ç½‘IP |
   | ALICLOUD_USER | root |
   | ALICLOUD_PRIVATE_KEY | SSHç§é’¥å†…å®¹ |
   | ALICLOUD_PORT | 22 |

### æ­¥éª¤2: ç”Ÿæˆæ­£ç¡®çš„SSHå¯†é’¥

```bash
# ç”Ÿæˆä¸“ç”¨SSHå¯†é’¥
./generate-ssh-key.sh

# å¤åˆ¶æ˜¾ç¤ºçš„ç§é’¥å†…å®¹åˆ°ALICLOUD_PRIVATE_KEY
```

### æ­¥éª¤3: éªŒè¯æœåŠ¡å™¨é…ç½®

åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š
```bash
# æ£€æŸ¥Dockerå®‰è£…
docker --version
docker-compose --version

# æ£€æŸ¥ç«¯å£
netstat -tlnp | grep 3001

# æµ‹è¯•æœ¬åœ°SSH
ssh -i ~/.ssh/id_rsa root@127.0.0.1
```

### æ­¥éª¤4: é‡æ–°è§¦å‘éƒ¨ç½²

```bash
# æ¨é€ä¸€ä¸ªå°çš„æ›´æ”¹è§¦å‘é‡æ–°éƒ¨ç½²
echo "test" > test.txt
git add test.txt
git commit -m "è§¦å‘é˜¿é‡Œäº‘Dockeréƒ¨ç½²"
git push origin main
```

## ğŸ” è°ƒè¯•å‘½ä»¤

### æ£€æŸ¥GitHub Actionsæ—¥å¿—
1. è®¿é—®: https://github.com/helloimcx/diancan-food-ordering/actions
2. ç‚¹å‡»"é˜¿é‡Œäº‘æœåŠ¡å™¨Dockeréƒ¨ç½²"
3. æŸ¥çœ‹å¤±è´¥æ­¥éª¤çš„è¯¦ç»†æ—¥å¿—

### æ‰‹åŠ¨æµ‹è¯•SSHè¿æ¥
```bash
# æµ‹è¯•GitHub Actionsä¸­çš„SSHå‘½ä»¤
ssh -i ~/.ssh/id_rsa -o StrictHostKeyChecking=no root@YOUR_SERVER_IP "echo 'SSHè¿æ¥æˆåŠŸ'"
```

## ğŸ“‹ é¢„æ£€æŸ¥æ¸…å•

- [ ] æœåŠ¡å™¨å·²å®‰è£…Docker
- [ ] æœåŠ¡å™¨å·²è¿è¡Œ`./server-setup.sh`
- [ ] é˜¿é‡Œäº‘å®‰å…¨ç»„å·²æ·»åŠ ç«¯å£3001å’Œ22
- [ ] SSHå¯†é’¥å·²æ­£ç¡®é…ç½®
- [ ] GitHub Secretså·²è®¾ç½®
- [ ] é˜²ç«å¢™å…è®¸SSHè¿æ¥

## ğŸ¯ å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### å¦‚æœæ‚¨è¿˜æ²¡æœ‰é˜¿é‡Œäº‘æœåŠ¡å™¨
1. **å…ˆä½¿ç”¨Railwayæ–¹æ¡ˆ**ï¼š
   ```bash
   ./railway-deploy.sh
   ```

2. **è·å–Railway APIåœ°å€**
3. **æ›´æ–°Vercelç¯å¢ƒå˜é‡**ï¼š
   ```
   VITE_API_URL=https://your-railway-app.railway.app/api
   ```

### å¦‚æœæ‚¨æœ‰é˜¿é‡Œäº‘æœåŠ¡å™¨ä½†é…ç½®å¤±è´¥
1. **å…ˆå®ŒæˆæœåŠ¡å™¨åˆå§‹åŒ–**ï¼š
   ```bash
   scp server-setup.sh root@YOUR_SERVER_IP:/root/
   ssh root@YOUR_SERVER_IP
   ./server-setup.sh
   ```

2. **é…ç½®GitHub Secrets**
3. **é‡æ–°éƒ¨ç½²**

## ğŸ’¡ æ›¿ä»£æ–¹æ¡ˆ

å¦‚æœé˜¿é‡Œäº‘éƒ¨ç½²ä»æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. **ä½¿ç”¨Railwayéƒ¨ç½²**ï¼ˆæ¨èï¼‰
2. **æ‰‹åŠ¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘**ï¼š
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥éƒ¨ç½²
   cd /opt/diancan-backend
   ./deploy.sh
   ```

3. **ä½¿ç”¨å…¶ä»–äº‘å¹³å°**ï¼ˆHeroku, Render, Fly.ioï¼‰

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

è¯·æä¾›ï¼š
1. GitHub Actionså¤±è´¥çš„è¯¦ç»†æ—¥å¿—
2. æœåŠ¡å™¨æ“ä½œç³»ç»Ÿç‰ˆæœ¬
3. Dockerå®‰è£…çŠ¶æ€
4. SSHè¿æ¥æµ‹è¯•ç»“æœ